import TemplateUpload from "./components/Admin/TemplateUpload/TemplateUpload";
import ReportsAccess from "./components/Admin/ReportsAccess/ReportsAccess";
import ReportsAccessForm from "./components/Admin/ReportsAccess/ReportsAccessForm/ReportsAccessForm";
import FormsForm from "./components/Admin/Forms/FormsForm/FormsForm";
import Forms from "./components/Admin/Forms/Forms";
import OverviewDashboard from "./components/Admin/OverviewDashboard/OverviewDashboard";
import ProjectType from "./components/Admin/ReferenceForms/ReferenceFormsList/ProjectType/ProjectType";
import Department from "./components/Admin/ReferenceForms/ReferenceFormsList/Department/Department";
import DocumentType from "./components/Admin/ReferenceForms/ReferenceFormsList/DocumentType/DocumentType";
import Railway from "./components/Admin/ReferenceForms/ReferenceFormsList/Railway/Railway";
import BankName from "./components/Admin/ReferenceForms/ReferenceFormsList/BankName/BankName";
import RevisionStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/RevisionStatus/RevisionStatus";
import InsuranceType from "./components/Admin/ReferenceForms/ReferenceFormsList/InsuranceType/InsuranceType";
import ContractExecutives from "./components/Admin/ReferenceForms/ReferenceFormsList/ContractExecutives/ContractExecutives";
import ContractType from "./components/Admin/ReferenceForms/ReferenceFormsList/ContractType/ContractType";
import ContractorSpecialization from "./components/Admin/ReferenceForms/ReferenceFormsList/ContractorSpecialization/ContractorSpecialization";
import ContractFileType from "./components/Admin/ReferenceForms/ReferenceFormsList/ContractFileType/ContractFileType";
import LandAcquisitionExecutives from "./components/Admin/ReferenceForms/ReferenceFormsList/LandAcquisitionExecutives/LandAcquisitionExecutives";
import LAFileType from "./components/Admin/ReferenceForms/ReferenceFormsList/LAFileType/LAFileType";
import LALandStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/LALandStatus/LALandStatus";
import LAStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/LAStatus/LAStatus";
import LACategory from "./components/Admin/ReferenceForms/ReferenceFormsList/LACategory/LACategory";
import LASubCategory from "./components/Admin/ReferenceForms/ReferenceFormsList/LASubCategory/LASubCategory";
import LandAcquisitionProcessForm from "./components/UpdateForms/LandAcquisitionProcess/LandAcquisitionProcessForm/LandAcquisitionProcessForm";
import LandAcquisitionProcess from "./components/UpdateForms/LandAcquisitionProcess/LandAcquisitionProcess";
import IssueFileType from "./components/Admin/ReferenceForms/ReferenceFormsList/IssueFileType/IssueFileType";
import IssuePriority from "./components/Admin/ReferenceForms/ReferenceFormsList/IssuePriority/IssuePriority";
import IssueOtherOrganisation from "./components/Admin/ReferenceForms/ReferenceFormsList/IssueOtherOrganisation/IssueOtherOrganisation";
import IssueStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/IssueStatus/IssueStatus";
import IssueCategory from "./components/Admin/ReferenceForms/ReferenceFormsList/IssueCategory/IssueCategory";
import IssueCategoryTitle from "./components/Admin/ReferenceForms/ReferenceFormsList/IssueCategoryTitle/IssueCategoryTitle";
import IssueContractCategory from "./components/Admin/ReferenceForms/ReferenceFormsList/IssueContractCategory/IssueContractCategory";
import ApprovalAuthority from "./components/Admin/ReferenceForms/ReferenceFormsList/ApprovalAuthority/ApprovalAuthority";
import PurposeOfSubmission from "./components/Admin/ReferenceForms/ReferenceFormsList/PurposeOfSubmission/PurposeOfSubmission";
import DesignExecutives from "./components/Admin/ReferenceForms/ReferenceFormsList/DesignExecutives/DesignExecutives";
import DesignFileType from "./components/Admin/ReferenceForms/ReferenceFormsList/DesignFileType/DesignFileType";
import SubmittedBy from "./components/Admin/ReferenceForms/ReferenceFormsList/SubmittedBy/SubmittedBy";
import Stage from "./components/Admin/ReferenceForms/ReferenceFormsList/Stage/Stage";
import AsBuiltStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/AsBuiltStatus/AsBuiltStatus";
import DrawingType from "./components/Admin/ReferenceForms/ReferenceFormsList/DrawingType/DrawingType";
import UtilityShiftingExecutives from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityShiftingExecutives/UtilityShiftingExecutives";
import UtilityShiftingFileTyp from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityShiftingFileTyp/UtilityShiftingFileTyp";
import UtilityTypes from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityTypes/UtilityTypes";
import UtilityStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityStatus/UtilityStatus";
import UtilityRequirementStage from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityRequirementStage/UtilityRequirementStage";
import UtilityExecutionAgency from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityExecutionAgency/UtilityExecutionAgency";
import UtilityCategory from "./components/Admin/ReferenceForms/ReferenceFormsList/UtilityCategory/UtilityCategory";
import BankGuaranteeType from "./components/Admin/ReferenceForms/ReferenceFormsList/BankGuaranteeType/BankGuaranteeType";
import StructureType from "./components/Admin/ReferenceForms/ReferenceFormsList/StructureType/StructureType";
import YesOrNoStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/YesOrNoStatus/YesOrNoStatus";
import ExecutionStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/ExecutionStatus/ExecutionStatus";
import GeneralStatus from "./components/Admin/ReferenceForms/ReferenceFormsList/GeneralStatus/GeneralStatus";
import UserType from "./components/Admin/ReferenceForms/ReferenceFormsList/UserType/UserType";
import DashboardType from "./components/Admin/ReferenceForms/ReferenceFormsList/DashboardType/DashboardType";
import ReferenceForms from "./components/Admin/ReferenceForms/ReferenceForms";
import DashboardForm from "./components/Admin/Dashboards/DashboardForm/DashboardForm";
import Dashboards from "./components/Admin/Dashboards/Dashboards";
import UserForm from "./components/Admin/Users/UserForm/UserForm";
import Users from "./components/Admin/Users/Users";
import AddStructureForm from "./components/UpdateForms/AddStructure/AddStructureForm/AddStructureForm";
import AddStructure from "./components/UpdateForms/AddStructure/AddStructure";
import IssuesForm from "./components/UpdateForms/Issues/IssuesForm/IssuesForm";
import Issues from "./components/UpdateForms/Issues/Issues";
import ValidateData from "./components/UpdateForms/ValidateData/ValidateData";
import ModifyActuals from "./components/UpdateForms/ModifyActuals/ModifyActuals";
import NewActivitiesUpdate from "./components/UpdateForms/NewActivitiesUpdate/NewActivitiesUpdate";
import P6NewData from "./components/UpdateForms/P6NewData/P6NewData";
import ContractorForm from "./components/UpdateForms/Contractor/ContractorForm/ContractorForm";
import Contractor from "./components/UpdateForms/Contractor/Contractor";
import UpdateStructureForm from "./components/UpdateForms/UpdateStructure/UpdateStructureForm/UpdateStructureForm";
import UpdateStructure from "./components/UpdateForms/UpdateStructure/UpdateStructure";
import UtilityShiftingForm from "./components/UpdateForms/UtilityShifting/UtilityShiftingForm/UtilityShiftingForm";
import UtilityShifting from "./components/UpdateForms/UtilityShifting/UtilityShifting";
import ContractForm from "./components/UpdateForms/Contract/ContractForm/ContractForm";
import Contract from "./components/UpdateForms/Contract/Contract";
import DesignDrawingForm from "./components/UpdateForms/DesignDrawing/DesignDrawingForm/DesignDrawingForm";
import DesignDrawing from "./components/UpdateForms/DesignDrawing/DesignDrawing";
import GanttBarChart from "./components/Charts/GanttBarChart/GanttBarChart";
import LandAcquisitionForm from "./components/UpdateForms/LandAcquisition/LandAcquisitionForm/LandAcquisitionForm";
import LandAcquisition from "./components/UpdateForms/LandAcquisition/LandAcquisition";
import Works from "./components/Works/Works";
import Work from "./components/UpdateForms/Work/Work";
import WorkForm from "./components/UpdateForms/Work/WorkForm/WorkForm";
import Project from "./components/UpdateForms/Project/Project";
import QuickLinks from "./components/QuickLinks/QuickLinks";
import Documents from "./components/Documents/Documents";
import Reports from "./components/Reports/Reports";
import Modules from "./components/Modules/Modules";
import Admin from "./components/Admin/Admin";
import UpdateForms from "./components/UpdateForms/UpdateForms";
import Footer from "./components/Footer/Footer";
import Sidebar from "./components/Sidebar/Sidebar";
import Header from "./components/Header/Header";
import About from "./components/About/About";
import Dashboard from "./components/Dashboard/Dashboard";
import { PageTitleProvider } from "./context/PageTitleContext";
import React, { useEffect, useState } from "react";
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom";
import { API_BASE_URL } from "./config";
import "./App.css";
import Layout from "./components/Layout/Layout";
import Login from "./components/Login/Login";
import Home from "./components/Home/Home";
import ProjectForm from "./components/UpdateForms/Project/ProjectForm/ProjectForm";
import { QueryClientProvider } from "@tanstack/react-query";
import { queryClient } from "./queryClient";


import WorkOverviewDashboard from "./components/Works/WorkOverviewDashboard";
import ProjectOverviewDashboard from "./components/Works/ProjectOverviewDashboard";
import ExecutionOverviewDashboard from "./components/Works/ExecutionOverviewDashboard";
import ContractOverviewDashboard from "./components/Works/ContractOverviewDashboard";
import IssuesDashboard from "./components/Works/IssuesOverview";
import MonthwiseProgress from "./components/Works/MonthwiseProgress";
import MonthwisePlan from "./components/Works/MonthwisePlan";
import DailyProgress from "./components/Works/DailyProgress";
import GISMap from "./components/Works/GISMap";
import SitePhotos from "./components/Works/SitePhotos";
import ExecutionOverview from "./components/Works/ExecutionOverview";
import TimelineScheduleDashboard from "./components/Works/TimelineScheduleDashboard";
import ProgressChart from "./components/Works/ProgressChart";
import ProgressTableDashboard from "./components/Works/ProgressTableDashboard";
import ProjectWeightages from "./components/Works/ProjectWeightages";
import ContractsOverview from "./components/Works/ContractsOverview";
import LandAcquisitionDashboard  from "./components/Works/LandAcquisition";
import IssuesOverview from "./components/Works/IssuesOverview";
import UtilityShiftingDashboard from "./components/Works/UtilityShifting";
import TimelineSchedule from "./components/Works/TimelineSchedule";
import ProgressTable from "./components/Works/ProgressTable";

import ContractsOverviewInProgress from "./components/Works/ContractsOverviewInProgress";
import ContractsOverviewCompleted from "./components/Works/ContractsOverviewCompleted";

import LandAcquisitionStripChart from "./components/Works/LandAcquisitionStripChart";
import LandAcquisitionDetails from "./components/Works/LandAcquisitionDetails";

import IssuesPendingDashboard from "./components/Works/IssuesPendingDashboard";

import UtilityShiftingStripChart from "./components/Works/UtilityShiftingStripChart";
import UtilityShiftingDetails from "./components/Works/UtilityShiftingDetails";
import UtilityShiftingMap from "./components/Works/UtilityShiftingMap";


import FortnightMeeting from "./components/Modules/FortnightMeeting";
import DrawingStatus from "./components/Modules/DrawingStatus";
/*import ProjectPerformance from "./components/Modules/ProjectPerformance";
import TimelineSchedule from "./components/Modules/TimelineSchedule";
import BGInsuranceDashboard from "./components/Modules/BGInsuranceDashboard";
import UsageAnalysisDashboard from "./components/Modules/UsageAnalysisDashboard";
import ContractwisePhysicalProgress from "./components/Modules/ContractwisePhysicalProgress";
import ComponentwiseProgress from "./components/Modules/ComponentwiseProgress";
import ProgressTable from "./components/Modules/ProgressTable";
import ContractStatus from "./components/Modules/ContractStatus";
import Issues from "./components/Modules/Issues";*/



function App() {
  const [message, setMessage] = useState("Loading...");
  const isAuthenticated = localStorage.getItem("token");
  useEffect(() => {
    fetch(`${API_BASE_URL}/api/test`).then(res => {
      if (!res.ok) throw new Error("Network error");
      return res.text();
    }).then(data => setMessage(data)).catch(() => setMessage("‚ùå Could not connect to backend"));
  }, []);
  return <PageTitleProvider>
		<BrowserRouter basename="/wcrpmis">
			<QueryClientProvider client={queryClient}>
				<Routes>
					<Route path="/" element={isAuthenticated ? <Navigate to="/home" /> : <Login />} />

					<Route path="/" element={isAuthenticated ? <Layout /> : <Navigate to="/" />}>
						<Route path="home" element={<Home />} />
						<Route path="footer" element={<Footer />} />
						<Route path="sidebar" element={<Sidebar />} />
						<Route path="header" element={<Header />} />
						<Route path="about" element={<About />} />
						<Route path="dashboard" element={<Dashboard />} />
						
						
						<Route path="work-overview-dashboard" element={<WorkOverviewDashboard />} />
						<Route path="project-overview-dashboard" element={<ProjectOverviewDashboard />} />
						<Route path="execution-overview-dashboard" element={<ExecutionOverviewDashboard />} />
						<Route path="contract-overview-dashboard" element={<ContractOverviewDashboard />} />
						<Route path="progress-table-dashboard" element={<ProgressTableDashboard />} />
						<Route path="timeline-schedule-dashboard" element={<TimelineScheduleDashboard />} />
						<Route path="issues-overview-dashboard" element={<IssuesDashboard />} />
						<Route path="monthwise-progress-dashboard" element={<MonthwiseProgress />} />
						<Route path="monthwise-plan-dashboard" element={<MonthwisePlan />} />
						<Route path="daily-progress-dashboard" element={<DailyProgress />} />
						<Route path="gis-map-dashboard" element={<GISMap />} />
						<Route path="site-photos-dashboard" element={<SitePhotos />} />							
						

						<Route path="updateforms" element={<UpdateForms />}>
							<Route path="project" element={<Project />}>
								<Route path="projectform" element={<ProjectForm />} />
							</Route>

							<Route path="work" element={<Work />}>
								<Route path="workform" element={<WorkForm />} />
							</Route>

							<Route path="land-acquisition" element={<LandAcquisition />}>
								<Route path="landacquisitionform" element={<LandAcquisitionForm />} />
							</Route>

							<Route path="landacquisitionprocess" element={<LandAcquisitionProcess />}>
								<Route path="landacquisitionprocessform" element={<LandAcquisitionProcessForm />} />
  							</Route>
							
							<Route path="design" element={<DesignDrawing />}>
								<Route path="add-design-form" element={<DesignDrawingForm />} />
							</Route>

							<Route path="ganttbarchart" element={<GanttBarChart />} />

							<Route path="contract" element={<Contract />}>
								<Route path="add-contract-form" element={<ContractForm />} />
							</Route>

							<Route path="utilityshifting" element={<UtilityShifting />}>
								<Route path="add-utility-shifting" element={<UtilityShiftingForm />} />
							</Route>

							<Route path="structure-form" element={<UpdateStructure />}>
								<Route path="get-structure-form" element={<UpdateStructureForm />} />
							</Route>

							<Route path="contractor" element={<Contractor />}>
								<Route path="add-contractor-form" element={<ContractorForm />} />
							</Route>

							<Route path="structure" element={<AddStructure />}>
								<Route path="addstructureform" element={<AddStructureForm />} />
							</Route>

							<Route path="p6-new-data" element={<P6NewData />} />
							<Route path="new-activities-update" element={<NewActivitiesUpdate />} />
							<Route path="modify-actuals" element={<ModifyActuals />} />
							<Route path="progress-approval-page" element={<ValidateData />} />
							<Route path="issues" element={<Issues />}>
								<Route path="issuesform" element={<IssuesForm />} />
							</Route>
						<Route path="referenceforms" element={<ReferenceForms />} />
                     </Route>
			
						<Route path="works" element={<Works />} />
						
						<Route path="execution-overview/:projectId" element={<ExecutionOverview />} />
						<Route path="timeline-schedule/:projectId" element={<TimelineSchedule />} />
						<Route path="progress-chart/:projectId" element={<ProgressChart />} />
						<Route path="progress-table/:projectId" element={<ProgressTable />} />
						<Route path="project-weightages/:projectId" element={<ProjectWeightages />} />
						<Route path="contracts-overview/:projectId" element={<ContractsOverview />} />
						<Route path="in-progress/:projectId" element={<ContractsOverviewInProgress />} />
						<Route path="completed/:projectId" element={<ContractsOverviewCompleted />} />
						<Route path="land-acquisition/:projectId" element={<LandAcquisitionDashboard />} />
						<Route path="land-strip-chart/:projectId" element={<LandAcquisitionStripChart />} />
						<Route path="land-details/:projectId" element={<LandAcquisitionDetails />} />
						<Route path="issues/:projectId" element={<IssuesOverview />} />
						<Route path="issue-pending/:projectId" element={<IssuesPendingDashboard />} />
						<Route path="utility-shifting/:projectId" element={<UtilityShiftingDashboard />} />	
						<Route path="utility-strip-chart/:projectId" element={<UtilityShiftingStripChart />} />
						<Route path="utility-shifting-details/:projectId" element={<UtilityShiftingDetails />} />
						<Route path="utility-shifting-map/:projectId" element={<UtilityShiftingMap />} />

						<Route path="modules/fortnight-meeting" element={<FortnightMeeting />} />
						<Route path="modules/drawing-status" element={<DrawingStatus />} />

						{/* <Route path="modules/project-performance" element={<ProjectPerformance />} /> */}
						{/* <Route path="modules/timeline-schedule" element={<TimelineSchedule />} /> */}
						{/* <Route path="modules/bg-insurance-dashboard" element={<BGInsuranceDashboard />} /> */}
						{/* <Route path="modules/usage-analysis-dashboard" element={<UsageAnalysisDashboard />} /> */}
						{/* <Route path="modules/contractwise-physical-progress" element={<ContractwisePhysicalProgress />} /> */}
						{/* <Route path="modules/componentwise-progress" element={<ComponentwiseProgress />} /> */}
						{/* <Route path="modules/progress-table" element={<ProgressTable />} /> */}
						{/* <Route path="modules/contract-status" element={<ContractStatus />} /> */}
						{/* <Route path="modules/issues" element={<Issues />} /> */}						
						
						
						
						<Route path="admin" element={<Admin />}>
							<Route path="users" element={<Users />}>
								<Route path="userform" element={<UserForm />} />
							</Route>
							<Route path="access-dashboards" element={<Dashboards />}>
								<Route path="dashboardform" element={<DashboardForm />} />
							</Route>
							<Route path="reference-forms" element={<ReferenceForms />} />
							<Route path="access-forms" element={<Forms />} >
							<Route path="formsform" element={<FormsForm />} />
						</Route>
						<Route path="template-upload" element={<TemplateUpload />} />
						<Route path="access-reports" element={<ReportsAccess />}>
						       <Route path="get-access-reports" element={<ReportsAccessForm />} />
						   </Route>
							<Route path="left-menu" element={<OverviewDashboard />} />
						</Route>
						<Route path="bank-guarantee-type" element={<BankGuaranteeType />} />
						<Route path="dashboard-type" element={<DashboardType />} />
		           
						<Route path="user-type" element={<UserType />} />
						<Route path="general-status" element={<GeneralStatus />} />
						<Route path="executionStatus" element={<ExecutionStatus />} />
						<Route path="yesOrNoStatus" element={<YesOrNoStatus />} />
						<Route path="structureType" element={<StructureType />} />
					    <Route path="contractFileType" element={<ContractFileType />} />
						<Route path="contractorSpecialization" element={<ContractorSpecialization />} />
						<Route path="contractType" element={<ContractType />} />
						<Route path="contractExecutives" element={<ContractExecutives />} />
						<Route path="insuranceType" element={<InsuranceType />} />
						<Route path="revisionStatus" element={<RevisionStatus />} />
						<Route path="bankName" element={<BankName />} />
						<Route path="utilityCategory" element={<UtilityCategory />} />
				
						<Route path="utilityExecutionagency" element={<UtilityExecutionAgency />} />
						<Route path="utilityRequirementstage" element={<UtilityRequirementStage />} />
						<Route path="utilityStatus" element={<UtilityStatus />} />
						<Route path="utilityTypes" element={<UtilityTypes />} />
						<Route path="utilityShiftingfiletyp" element={<UtilityShiftingFileTyp />} />
						<Route path="utilityShiftingexecutives" element={<UtilityShiftingExecutives />} />
	
						<Route path="asBuiltStatus" element={<AsBuiltStatus />} />
						<Route path="drawingType" element={<DrawingType />} />
						<Route path="approvalAuthority" element={<ApprovalAuthority />} />
						<Route path="designStage" element={<Stage />} />
						<Route path="submittedBy" element={<SubmittedBy />} />
						<Route path="designFileType" element={<DesignFileType />} />
						<Route path="purposeOfSubmission" element={<PurposeOfSubmission />} />
						<Route path="designExecutives" element={<DesignExecutives />} />

						<Route path="issueFileType" element={<IssueFileType />} />
						<Route path="issuePriority" element={<IssuePriority />} />
						<Route path="issueOtherOrganisation" element={<IssueOtherOrganisation />} />
						<Route path="issueStatus" element={<IssueStatus />} />
						<Route path="issueContractCategory" element={<IssueContractCategory />} />
						<Route path="issueCategory" element={<IssueCategory />} />
						<Route path="issueCategoryTitle" element={<IssueCategoryTitle />} />

						<Route path="laExecutives" element={<LandAcquisitionExecutives />} />
						<Route path="laLandStatus" element={<LALandStatus />} />
						<Route path="laStatus" element={<LAStatus />} />
						<Route path="laFileType" element={<LAFileType />} />
						<Route path="laCategory" element={<LACategory />} />
						<Route path="laSubCategory" element={<LASubCategory />} />


						<Route path="modules" element={<Modules />} />
						<Route path="reports" element={<Reports />} />
						<Route path="documents" element={<Documents />} />
						<Route path="quicklinks" element={<QuickLinks />} />
						<Route path="department" element={<Department />} />
						<Route path="projectType" element={<ProjectType />} />
	          <Route path="railway" element={<Railway />} />
						<Route path="documentType" element={<DocumentType />} />


					</Route>

					<Route path="*" element={<div style={{
            textAlign: "center",
            marginTop: "20%"
          }}>
						<h2>{message}</h2>
					</div>} />
				</Routes>
			</QueryClientProvider>
		</BrowserRouter>
	</PageTitleProvider>;
}
export default App;